<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>First Mapbox Map</title>
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Custom CSS -->
    <style>
        #map {
            /* the width and height may be set to any size */
            width: 100%;
            height: 700px;
        }

    </style>
</head>
<body>

<h1>My First Mapbox Map!</h1>

<!-- The HTML element that serves as the Mapbox container -->





<div id='map'></div>

<!-- Mapbox JS -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<script src="js/keyss.js"></script>

<!--<script src="js/mapbox-geocoder-utils.js"></script>-->
<!--<script src="js/mapbox-lec.js"></script>-->
<!-- Custom JS -->

<script>

    mapboxgl.accessToken = mapboxToken;

    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 10,
        center: [-98.4916, 29.4252]
    });


    function geocode(search, token) {
        var baseUrl = 'https://api.mapbox.com';
        var endPoint = '/geocoding/v5/mapbox.places/';
        return fetch(baseUrl + endPoint + encodeURIComponent(search) + '.json' + "?" + 'access_token=' + token)
            .then(function(res) {
                return res.json();
                // to get all the data from the request, comment out the following three lines...
            }).then(function(data) {
                return data.features[0].center;
            });
    }




                                /////////////////:)GeoCode Starts Here/////////////
    function geocode(search, token) {
        var baseUrl = 'https://api.mapbox.com';
        var endPoint = '/geocoding/v5/mapbox.places/';
        return fetch(baseUrl + endPoint + encodeURIComponent(search) + '.json' + "?" + 'access_token=' + token)
            .then(function(res) {
                return res.json();
                // to get all the data from the request, comment out the following three lines...
            }).then(function(data) {
                return data.features[0].center;
            });
    }

    geocode("313 E Houston St, San Antonio, TX 78205", mapboxToken).then(function (results) {
        console.log(results);
        //recenter the map//
        // add a marker//
        map.setCenter(results)
        map.setZoom(11)
        var markerOptions = {
            color: "#ff0000",
            draggable: true
        }
        var marker = new mapboxgl.Marker(markerOptions)//have to pass in marker options//
            .setLngLat(results)
            .addTo(map);
        var texasPopup = new mapboxgl.Popup()
            .setHTML("<h1><em>Texas de Brazil</em></h1>" + "<ul><li>TEXAS DE BRAZIL HAPPY HOUR. Monday through Friday from 4:30pm to 6:00pm at most locations</li><li>Signature Dish:Herb-Marinated Pork Loin.\n" +
                "Picanha.\n" +
                "Brazilian Sausage.\n" +
                "Leg of Lamb.\n" +
                "Chicken Breast Wrapped in Bacon.\n" +
                "Alcatra.\n" +
                "Lamb Chops.\n" +
                "Filet Mignon Wrapped in Bacon.</li>")
            .addTo(marker)
        marker.setPopup(texasPopup)//binding popup and marker//
    })

    geocode("60 NE Interstate 410 Loop, San Antonio, TX 78216", mapboxToken).then(function (results) {
        console.log(results);
        //recenter the map//
        // add a marker//
        map.setCenter(results)
        map.setZoom(11)
        var markerOptions = {
            color: "#ff0000",
            draggable: true
        }
        var marker = new mapboxgl.Marker(markerOptions)//have to pass in marker options//
            .setLngLat(results)
            .addTo(map);
        var saltyPopup = new mapboxgl.Popup()
            .setHTML("<h1><em>Saltgrass</em></h1>" + "<ul><li>Happy Hour Drinks MONDAY - THURSDAY 3PM - 7PM</li><li>Signature Dish Favorites:Two-Fork CheeseCake</li><li>homemade beer bread</li>")
            .addTo(marker)
        marker.setPopup(saltyPopup)//binding popup and marker//
    })

    geocode("7403 Northwest Loop 410, San Antonio, TX 78245", mapboxToken).then(function (results) {
        console.log(results);
        //recenter the map//
        // add a marker//
        map.setCenter(results)
        map.setZoom(11)
        var markerOptions = {
            color: "#ff0000",
            draggable: true
        }
        var marker = new mapboxgl.Marker(markerOptions)//have to pass in marker options//
            .setLngLat(results)
            .addTo(map);
        var cheddarPopup = new mapboxgl.Popup()
            .setHTML("<h1><em>Cheddar's</em></h1>" + "<ul><li>Cheddars Happy Hour runs from Mondays through to Fridays and is available from 4pm till 7pm.</li><li>Signature items: Bourbon bacon-wrapped shrimp.</li>")
            .addTo(marker)
        marker.setPopup(cheddarPopup)//binding popup and marker//
    })





    var goodEats = [{
        name: "Texas de Brazil",
        location: [-98.489085, 29.426627],
        HappyHour: "TEXAS DE BRAZIL HAPPY HOUR. Monday through Friday from 4:30pm to 6:00pm at most locations"

    },
        {
            name: "Saltgrass",
            location: [-98.636528, 29.44665],
            HappyHour:  "Happy Hour - Saltgrass Steak House. San Antonio Drink Special HAPPY HOUR DRINKS MONDAY - THURSDAY 3PM - 7PM"

        },
        {
            name: "Cheddar",
            location: [-98.5, 29.52],
            HappyHour: " Cheddars Happy Hour runs from Mondays through to Fridays and is available from 4pm till 7pm."

        },


    ];

function iterate(item){
    console.log(item);
}
goodEats.forEach(iterate);

//"313 E Houston St, San Antonio, TX 78205" <-----Twxasdebrazil
//"60 NE Interstate 410 Loop, San Antonio, TX 78216"<---saltgrass

//"7403 Northwest Loop 410, San Antonio, TX 78245"<-----cheddars



</script>
</body>
</html>
